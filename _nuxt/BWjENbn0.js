import{d as c,u as k,s as v,M as N,O as j,a as x,Q as l,R as P,S as g,U as S,V as O,D as h,W as y,X as _,Y as w,Z as T,$ as R,a0 as A,a1 as d,a2 as B}from"./3n0_am96.js";const E=c({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,s){return()=>y(l[t.name],t.layoutProps,s.slots)}}),C={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},W=c({name:"NuxtLayout",inheritAttrs:!1,props:C,setup(t,s){const o=k(),u=g(d),e=!u||u===v()?P():u,a=N(()=>{let n=h(t.name)??(e==null?void 0:e.meta.layout)??"default";return n&&!(n in l)&&t.fallback&&(n=h(t.fallback)),n}),i=j();s.expose({layoutRef:i});const r=o.deferHydration();if(o.isHydrating){const n=o.hooks.hookOnce("app:error",r);x().beforeEach(n)}let f;return()=>{const n=a.value&&a.value in l,p=(e==null?void 0:e.meta.layoutTransition)??S,b=f;return f=a.value,O(n&&p,{default:()=>y(w,{suspensible:!0,onResolve:()=>{_(r)}},{default:()=>y(H,{layoutProps:T(s.attrs,{ref:i}),key:a.value||void 0,name:a.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==b&&m===a.value,hasTransition:!!p},s.slots)})}).default()}}}),H=c({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,s){const o=t.name;t.shouldProvide&&R(B,{isCurrent:e=>o===(e.meta.layout??"default")});const u=g(d);if(u&&u===v()){const e=P(),a={};for(const i in e){const r=i;Object.defineProperty(a,r,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?e[r]:u[r]})}R(d,A(a))}return()=>{var e,a;return!o||typeof o=="string"&&!(o in l)?(a=(e=s.slots).default)==null?void 0:a.call(e):y(E,{key:o,layoutProps:t.layoutProps,name:o},s.slots)}}});export{W as _};
