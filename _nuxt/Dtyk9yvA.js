import P from"./CIMLmMi7.js";import k from"./DKWT_7Ii.js";import b from"./EsLB3tjh.js";import{d as f,u as L,D as g,P as R,s as x,E as S,G as B,r as C,a as N,H as m,I as T,J as j,K as p,L as H,M as O,S as A,T as D,N as E,O as $,Q as r,p as w,R as I,e as M,i as y,w as _,c as d,U as v}from"./DUdaPUzi.js";import{u as F}from"./ObGgO7lL.js";import"./DAzO1abF.js";import"./CxYJgpPD.js";const G=f({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,o){return()=>p(m[t.name],t.layoutProps,o.slots)}}),J=f({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(t,o){const e=L(),n=g(R),s=n===x()?S():n,u=B(()=>{let a=r(t.name)??s.meta.layout??"default";return a&&!(a in m)&&t.fallback&&(a=r(t.fallback)),a}),i=C();o.expose({layoutRef:i});const l=e.deferHydration();if(e.isHydrating){const a=e.hooks.hookOnce("app:error",l);N().beforeEach(a)}return()=>{const a=u.value&&u.value in m,c=s.meta.layoutTransition??T;return j(D,a&&c,{default:()=>p(A,{suspensible:!0,onResolve:()=>{O(l)}},{default:()=>p(K,{layoutProps:H(o.attrs,{ref:i}),key:u.value||void 0,name:u.value,shouldProvide:!t.name,hasTransition:!!c},o.slots)})}).default()}}}),K=f({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(t,o){const e=t.name;return t.shouldProvide&&E($,{isCurrent:n=>e===(n.meta.layout??"default")}),()=>{var n,s;return!e||typeof e=="string"&&!(e in m)?(s=(n=o.slots).default)==null?void 0:s.call(n):p(G,{key:e,layoutProps:t.layoutProps,name:e},o.slots)}}}),Q={class:"document-driven-page"},Z=f({__name:"document-driven",setup(t){const{contentHead:o}=w().public.content,{page:e,layout:n}=I();return e.value,o&&F(e),(s,u)=>{const i=P,l=k,a=b,c=J;return d(),M("div",Q,[y(c,{name:r(n)||"default"},{default:_(()=>[r(e)?(d(),v(l,{key:r(e)._id,value:r(e)},{empty:_(({value:h})=>[y(i,{value:h},null,8,["value"])]),_:1},8,["value"])):(d(),v(a,{key:1}))]),_:1},8,["name"])])}}});export{Z as default};
